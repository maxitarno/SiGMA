<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <title></title>
    <link href="assets/css/bootstrap.css" rel="stylesheet">
    <script type="text/javascript" src="Scripts/jquery-2.1.3.js"></script>
    <script type="text/javascript" src="Scripts/jsapi.js"></script>
    <script type="text/javascript" src="Scripts/jQuery.print.js"></script>
    <script type="text/javascript">
        // Load the Visualization API and the piechart package.
        google.load('visualization', '1.0', { 'packages': ['corechart'] });
        google.load('visualization', '1', {packages: ['corechart', 'bar']});
        // Set a callback to run when the Google Visualization API is loaded.
        google.setOnLoadCallback(drawChart);

        // Callback that creates and populates a data table,
        // instantiates the pie chart, passes in the data and
        // draws it.
        function drawChart() {

            // Create the data table.
            var data = new google.visualization.DataTable();
            data.addColumn('string', 'Estados');
            data.addColumn('number', 'Cantidad');
            data.addRows([
              ['Adoptadas', 0],
              ['Halladaz', 0],
              ['Perdidas', 0]
            ]);
            function getURLParameter(name) { return decodeURIComponent((new RegExp('[?|&]' + name + '=' + '([^&;]+?)(&|#|;|$)').exec(location.search) || [, ""])[1].replace(/\+/g, '%20')) || null }
            //grafico de mascotas por estado
            var a = getURLParameter("a");
            var h = getURLParameter("h");
            var p = getURLParameter("p");
            var m = getURLParameter("m");
            data.setValue(0, 1, data.getValue(0, 1) + ((a*100)/m));
            data.setValue(1, 1, data.getValue(1, 1) + ((h*100)/m));
            data.setValue(2, 1, data.getValue(2, 1) + ((p*100)/m));
            //grafico de adopciones por sexo
            var cantH = getURLParameter("cantH");
            var cantM = getURLParameter("cantM");
            var dataPorSexo = new google.visualization.DataTable();
            dataPorSexo.addColumn('string', 'Sexo');
            dataPorSexo.addColumn('number', 'Cantidad');
            dataPorSexo.addRows([
              ['Hembras', 0],
              ['Machos', 0]
            ]);
            dataPorSexo.setValue(0, 1, dataPorSexo.getValue(0, 1) + cantH);
            dataPorSexo.setValue(1, 1, dataPorSexo.getValue(1, 1) + cantM);
            // Set chart options
            var options = { 
                'title': 'Estadisticas de las mascotas',
                'width': 800,
                'height': 700,
                'is3D': true,
            };
            //opciones de adopciones por sexo
            var optionsPorSexo = { 
                'title': 'Estadisticas de las mascotas',
                'width': 800,
                'height': 700,
            };
            // Instantiate and draw our chart, passing in some options.
            var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
            chart.draw(data, options);
            //grafico adopciones por sexo
            var chartAdopcionesPorSexo = new  google.visualization.BarChart(document.getElementById('adopciones'));
            chartAdopcionesPorSexo.draw(dataPorSexo, optionsPorSexo);
        }
    </script>
    <script type="text/javascript">
        function atras() {
            location.href = "Graficos.aspx";
        }
    </script>
</head>
    <body>
    <style type="text/css">
  
        h1 {
            font-size: 180% ;
            }
  
        h2 {
            border-bottom: 1px solid #999999 ;
            }
  
        .printable {
            border: 1px dotted #CCCCCC ;
            padding: 10px 10px 10px 10px ;
            }
  
        img {
            background-color: #E0E0E0 ;
            border: 1px solid #666666 ;
            padding: 5px 5px 5px 5px ;
            }
  
        a {
            color: black ;
            }
  
    </style>
    <script type="text/javascript">

        // When the document is ready, initialize the link so
        // that when it is clicked, the printable area of the
        // page will print.
        $(
            function () {

                // Hook up the print link.
                $("a")
                    .attr("href", "javascript:void( 0 )")
                    .click(
                        function () {
                            // Print the DIV.
                            $(".printable").print();

                            // Cancel click event.
                            return (false);
                        }
                        )
                ;

            }
            );
  
    </script>
    <div class="printable">
        <div class="col-md-12">
            <div class="col-md-8 col-md-offset-2">
                <center>
                    <h1>
                        Estadisticas de las mascotas 
                        <br />
                        Este grafico muestra los porcentajes de las mascotas por Estado.
                        <br />
                        <img alt="" src="assets/img/menu/mascotas.png" width="100px" height="100px" />
                    </h1>
                </center>
            </div>
        </div>
        <div class="col-md-12">
            <div class="col-md-4 col-md-offset-2">
                <center>
                    <div id="chart_div">

                    </div>
                </center>
            </div>
            <div class="col-md-4">
                <center>
                    <div id="adopciones">
                    
                    </div>
                </center>
            </div>
        </div>
    </div>
    <div class="col-md-12">
            <div class="col-md-8 col-md-offset-2">
                <center>
                    <p>
                        <a>Imprimir</a>
                    </p>
                </center>
            </div>
        </div>
    <div class="col-md-12">
            <center>
                <div class="col-md-8 col-md-offset-2">
                    <img alt="volver" src="imagenes/volver.png" onclick="atras()" />
                </div>
            </center>
        </div>
</body>
</html>
